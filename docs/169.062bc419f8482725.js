"use strict";(self.webpackChunkrsm=self.webpackChunkrsm||[]).push([[169],{7550:(Li,ne,g)=>{g.d(ne,{h:()=>Fi,w:()=>Bi});var U=g(467),l=g(4438);class st{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof e.crashNumberLimit?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof e.minimumNonErrorTimePeriod?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=r=>{const n="error"in r?r.error:r.reason;n instanceof Error&&this._handleError(n,r)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,r){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(r)}off(e,r){this._listeners[e]=this._listeners[e].filter(n=>n!==r)}_fire(e,...r){const n=this._listeners[e]||[];for(const o of n)o.apply(this,[null,...r])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,r){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:r instanceof ErrorEvent?r.filename:void 0,lineno:r instanceof ErrorEvent?r.lineno:void 0,colno:r instanceof ErrorEvent?r.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&null!=e.context&&"ready"===this.state&&this._isErrorComingFromThisItem(e)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function G(t,e=new Set){const r=[t],n=new Set;let o=0;for(;r.length>o;){const s=r[o++];if(!n.has(s)&&oe(s)&&!e.has(s))if(n.add(s),Symbol.iterator in s)try{for(const i of s)r.push(i)}catch{}else for(const i in s)"defaultValue"!==i&&r.push(s[i])}return n}function oe(t){const e=Object.prototype.toString.call(t),r=typeof t;return!("number"===r||"boolean"===r||"string"===r||"symbol"===r||"function"===r||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}var ie=g(9973),m=g(2661),E=g(5281);const at=function ae(t,e){return function(r){return t(e(r))}},H=at(Object.getPrototypeOf,Object);var ct=Function.prototype.toString,le=Object.prototype.hasOwnProperty,_e=ct.call(Object);const ht=function pe(t){return(0,m.A)(t)&&1===t.nodeType&&!function fe(t){if(!(0,m.A)(t)||"[object Object]"!=(0,E.A)(t))return!1;var e=H(t);if(null===e)return!0;var r=le.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&ct.call(r)==_e}(t)},dt=function me(t,e){return t===e||t!=t&&e!=e},M=function ve(t,e){for(var r=t.length;r--;)if(dt(t[r][0],e))return r;return-1};var Te=Array.prototype.splice;function w(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}w.prototype.clear=function ye(){this.__data__=[],this.size=0},w.prototype.delete=function Ae(t){var e=this.__data__,r=M(e,t);return!(r<0||(r==e.length-1?e.pop():Te.call(e,r,1),--this.size,0))},w.prototype.get=function we(t){var e=this.__data__,r=M(e,t);return r<0?void 0:e[r][1]},w.prototype.has=function Se(t){return M(this.__data__,t)>-1},w.prototype.set=function Pe(t,e){var r=this.__data__,n=M(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const B=w;var j=g(554);const ut=function He(t){if(!(0,j.A)(t))return!1;var e=(0,E.A)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var t,p=g(1860),Ve=p.A["__core-js_shared__"],lt=(t=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var $e=Function.prototype.toString;const v=function Qe(t){if(null!=t){try{return $e.call(t)}catch{}try{return t+""}catch{}}return""};var qe=/^\[object .+?Constructor\]$/,rr=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const or=function nr(t){return!(!(0,j.A)(t)||function ke(t){return!!lt&&lt in t}(t))&&(ut(t)?rr:qe).test(v(t))},C=function ar(t,e){var r=function sr(t,e){return t?.[e]}(t,e);return or(r)?r:void 0},I=C(p.A,"Map"),D=C(Object,"create");var pr=Object.prototype.hasOwnProperty;var vr=Object.prototype.hasOwnProperty;function O(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}O.prototype.clear=function dr(){this.__data__=D?D(null):{},this.size=0},O.prototype.delete=function lr(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},O.prototype.get=function yr(t){var e=this.__data__;if(D){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return pr.call(e,t)?e[t]:void 0},O.prototype.has=function Cr(t){var e=this.__data__;return D?void 0!==e[t]:vr.call(e,t)},O.prototype.set=function Er(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=D&&void 0===e?"__lodash_hash_undefined__":e,this};const _t=O,R=function jr(t,e){var r=t.__data__;return function xr(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map};function S(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}S.prototype.clear=function Or(){this.size=0,this.__data__={hash:new _t,map:new(I||B),string:new _t}},S.prototype.delete=function Ir(t){var e=R(this,t).delete(t);return this.size-=e?1:0,e},S.prototype.get=function Nr(t){return R(this,t).get(t)},S.prototype.has=function Mr(t){return R(this,t).has(t)},S.prototype.set=function Rr(t,e){var r=R(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const Wr=S;function x(t){var e=this.__data__=new B(t);this.size=e.size}x.prototype.clear=function Ie(){this.__data__=new B,this.size=0},x.prototype.delete=function Ne(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},x.prototype.get=function Me(t){return this.__data__.get(t)},x.prototype.has=function Re(t){return this.__data__.has(t)},x.prototype.set=function Ur(t,e){var r=this.__data__;if(r instanceof B){var n=r.__data__;if(!I||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Wr(n)}return r.set(t,e),this.size=r.size,this};const Hr=x;var Jr=function(){try{var t=C(Object,"defineProperty");return t({},"",{}),t}catch{}}();const ft=Jr,gt=function zr(t,e,r){"__proto__"==e&&ft?ft(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var Qr=Object.prototype.hasOwnProperty;const pt=function Zr(t,e,r){var n=t[e];(!Qr.call(t,e)||!dt(n,r)||void 0===r&&!(e in t))&&gt(t,e,r)},L=function qr(t,e,r,n){var o=!r;r||(r={});for(var s=-1,i=e.length;++s<i;){var a=e[s],h=n?n(r[a],t[a],a,r,t):void 0;void 0===h&&(h=t[a]),o?gt(r,a,h):pt(r,a,h)}return r},yt=function en(t){return(0,m.A)(t)&&"[object Arguments]"==(0,E.A)(t)};var bt=Object.prototype,rn=bt.hasOwnProperty,nn=bt.propertyIsEnumerable,on=yt(function(){return arguments}())?yt:function(t){return(0,m.A)(t)&&rn.call(t,"callee")&&!nn.call(t,"callee")};const sn=on,k=Array.isArray;var mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,vt=mt&&"object"==typeof module&&module&&!module.nodeType&&module,Ct=vt&&vt.exports===mt?p.A.Buffer:void 0;const Tt=(Ct?Ct.isBuffer:void 0)||function cn(){return!1};var fn=/^(?:0|[1-9]\d*)$/;const pn=function gn(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&("number"==r||"symbol"!=r&&fn.test(t))&&t>-1&&t%1==0&&t<e},At=function bn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;const J=function kn(t){return function(e){return t(e)}};var Jn=g(7133),Et="object"==typeof exports&&exports&&!exports.nodeType&&exports,N=Et&&"object"==typeof module&&module&&!module.nodeType&&module,z=N&&N.exports===Et&&Jn.A.process;const P=function(){try{return N&&N.require&&N.require("util").types||z&&z.binding&&z.binding("util")}catch{}}();var wt=P&&P.isTypedArray;const Zn=wt?J(wt):function Hn(t){return(0,m.A)(t)&&At(t.length)&&!!u[(0,E.A)(t)]};var Yn=Object.prototype.hasOwnProperty;const Ot=function Xn(t,e){var r=k(t),n=!r&&sn(t),o=!r&&!n&&Tt(t),s=!r&&!n&&!o&&Zn(t),i=r||n||o||s,a=i?function Yr(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],h=a.length;for(var c in t)(e||Yn.call(t,c))&&(!i||!("length"==c||o&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pn(c,h)))&&a.push(c);return a};var to=Object.prototype;const $=function eo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||to)},no=at(Object.keys,Object);var so=Object.prototype.hasOwnProperty;const St=function co(t){return null!=t&&At(t.length)&&!ut(t)},Q=function ho(t){return St(t)?Ot(t):function io(t){if(!$(t))return no(t);var e=[];for(var r in Object(t))so.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)};var po=Object.prototype.hasOwnProperty;const bo=function yo(t){if(!(0,j.A)(t))return function _o(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=$(t),r=[];for(var n in t)"constructor"==n&&(e||!po.call(t,n))||r.push(n);return r},Z=function mo(t){return St(t)?Ot(t,!0):bo(t)};var xt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pt=xt&&"object"==typeof module&&module&&!module.nodeType&&module,jt=Pt&&Pt.exports===xt?p.A.Buffer:void 0,It=jt?jt.allocUnsafe:void 0;const Dt=function Po(){return[]};var Io=Object.prototype.propertyIsEnumerable,Nt=Object.getOwnPropertySymbols,Do=Nt?function(t){return null==t?[]:(t=Object(t),function So(t,e){for(var r=-1,n=null==t?0:t.length,o=0,s=[];++r<n;){var i=t[r];e(i,r,t)&&(s[o++]=i)}return s}(Nt(t),function(e){return Io.call(t,e)}))}:Dt;const q=Do,Ft=function Mo(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t};var Ro=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ft(e,q(t)),t=H(t);return e}:Dt;const Mt=Ro,Bt=function Ko(t,e,r){var n=e(t);return k(t)?n:Ft(n,r(t))},Go=function Uo(t){return Bt(t,Q,q)},Vo=function Ho(t){return Bt(t,Z,Mt)},Y=C(p.A,"DataView"),X=C(p.A,"Promise"),tt=C(p.A,"Set"),et=C(p.A,"WeakMap");var Rt="[object Map]",Lt="[object Promise]",Wt="[object Set]",Kt="[object WeakMap]",Ut="[object DataView]",Zo=v(Y),qo=v(I),Yo=v(X),Xo=v(tt),ts=v(et),T=E.A;(Y&&T(new Y(new ArrayBuffer(1)))!=Ut||I&&T(new I)!=Rt||X&&T(X.resolve())!=Lt||tt&&T(new tt)!=Wt||et&&T(new et)!=Kt)&&(T=function(t){var e=(0,E.A)(t),r="[object Object]"==e?t.constructor:void 0,n=r?v(r):"";if(n)switch(n){case Zo:return Ut;case qo:return Rt;case Yo:return Lt;case Xo:return Wt;case ts:return Kt}return e});const rt=T;var rs=Object.prototype.hasOwnProperty;const Gt=p.A.Uint8Array,nt=function is(t){var e=new t.constructor(t.byteLength);return new Gt(e).set(new Gt(t)),e};var hs=/\w*$/;var Ht=g(6944),Vt=Ht.A?Ht.A.prototype:void 0,kt=Vt?Vt.valueOf:void 0;const Bs=function Ms(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return nt(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function as(t,e){var r=e?nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function fs(t,e){var r=e?nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function ds(t){var e=new t.constructor(t.source,hs.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return function ls(t){return kt?Object(kt.call(t)):{}}(t)}};var Jt=Object.create,Rs=function(){function t(){}return function(e){if(!(0,j.A)(e))return{};if(Jt)return Jt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Ls=Rs;var zt=P&&P.isMap;const ks=zt?J(zt):function Gs(t){return(0,m.A)(t)&&"[object Map]"==rt(t)};var $t=P&&P.isSet;const Zs=$t?J($t):function zs(t){return(0,m.A)(t)&&"[object Set]"==rt(t)};var Qt="[object Arguments]",Zt="[object Function]",qt="[object Object]",d={};d[Qt]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object DataView]"]=d["[object Boolean]"]=d["[object Date]"]=d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Map]"]=d["[object Number]"]=d[qt]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object Symbol]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Error]"]=d[Zt]=d["[object WeakMap]"]=!1;const Ai=function W(t,e,r,n,o,s){var i,a=1&e,h=2&e,c=4&e;if(r&&(i=o?r(t,n,o,s):r(t)),void 0!==i)return i;if(!(0,j.A)(t))return t;var f=k(t);if(f){if(i=function ns(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&rs.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!a)return function wo(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,i)}else{var y=rt(t),K=y==Zt||"[object GeneratorFunction]"==y;if(Tt(t))return function Ao(t,e){if(e)return t.slice();var r=t.length,n=It?It(r):new t.constructor(r);return t.copy(n),n}(t,a);if(y==qt||y==Qt||K&&!o){if(i=h||K?{}:function Ws(t){return"function"!=typeof t.constructor||$(t)?{}:Ls(H(t))}(t),!a)return h?function Lo(t,e){return L(t,Mt(t),e)}(t,function vo(t,e){return t&&L(e,Z(e),t)}(i,t)):function No(t,e){return L(t,q(t),e)}(t,function uo(t,e){return t&&L(e,Q(e),t)}(i,t))}else{if(!d[y])return o?t:{};i=Bs(t,y,a)}}s||(s=new Hr);var ee=s.get(t);if(ee)return ee;s.set(t,i),Zs(t)?t.forEach(function(b){i.add(W(b,e,r,b,t,s))}):ks(t)&&t.forEach(function(b,A){i.set(A,W(b,e,r,A,t,s))});var re=f?void 0:(c?h?Vo:Go:h?Z:Q)(t);return function Vr(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(re||t,function(b,A){re&&(b=t[A=b]),pt(i,A,W(b,e,r,A,t,s))}),i};class Yt extends st{constructor(e,r={}){super(r),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=(0,ie.A)(this._save.bind(this),"number"==typeof r.saveInterval?r.saveInterval:5e3),e&&(this._creator=(n,o)=>e.create(n,o)),this._destructor=n=>n.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},r=[],n=this._config.rootsAttributes||{},o={};for(const[i,a]of Object.entries(this._data.roots))a.isLoaded?(e[i]="",o[i]=n[i]||{}):r.push(i);const s={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:r,rootsAttributes:o,_watchdogInitialData:this._data};return delete s.initialData,s.extraPlugins.push(xi),this._initUsingData?this.create(e,s,s.context):ht(this._elementOrData)?this.create(this._elementOrData,s,s.context):this.create(this._editables,s,s.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,r=this._config,n){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData="string"==typeof e||Object.keys(e).length>0&&"string"==typeof Object.values(e)[0],this._config=this._cloneEditorConfiguration(r)||{},this._config.context=n,this._creator(e,this._config))).then(o=>{this._editor=o,o.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=o.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,r=e.model.document.roots.filter(a=>a.isAttached()&&"$graveyard"!=a.rootName),{plugins:n}=e,o=n.has("CommentsRepository")&&n.get("CommentsRepository"),s=n.has("TrackChanges")&&n.get("TrackChanges"),i={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};r.forEach(a=>{i.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(i.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return o&&(i.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),s&&(i.suggestions=JSON.stringify(s.getSuggestions({toJSON:!0,skipNotAttached:!0}))),i}_getEditables(){const e={};for(const r of this.editor.model.document.getRootNames()){const n=this.editor.ui.getEditableElement(r);n&&(e[r]=n)}return e}_isErrorComingFromThisItem(e){return function it(t,e,r=new Set){if(t===e&&function se(t){return"object"==typeof t&&null!==t}(t))return!0;const n=G(t,r),o=G(e,r);for(const s of n)if(o.has(s))return!0;return!1}(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return function Oi(t,e){return Ai(t,5,e="function"==typeof e?e:void 0)}(e,(r,n)=>{if(ht(r)||"context"===n)return r})}}class xi{constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},r=>{this._restoreCollaborationData(),this._restoreEditorData(r)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,r){if("name"in r){const n=e.createElement(r.name,r.attributes);if(r.children)for(const o of r.children)n._appendChild(this._createNode(e,o));return n}return e.createText(r.data,r.attributes)}_restoreEditorData(e){const r=this.editor;Object.entries(this._data.roots).forEach(([n,{content:o,attributes:s}])=>{const i=JSON.parse(o),a=JSON.parse(s),h=r.model.document.getRoot(n);for(const[c,f]of a)e.setAttribute(c,f,h);for(const c of i){const f=this._createNode(e,c);e.insert(f,h,"end")}}),Object.entries(this._data.markers).forEach(([n,o])=>{const{document:s}=r.model,{rangeJSON:{start:i,end:a},...h}=o,c=s.getRoot(i.root),f=e.createPositionFromPath(c,i.path,i.stickiness),y=e.createPositionFromPath(c,a.path,a.stickiness),K=e.createRange(f,y);e.addMarker(n,{range:K,...h})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),r=JSON.parse(this._data.suggestions);e.forEach(n=>{const o=this.editor.config.get("collaboration.channelId"),s=this.editor.plugins.get("CommentsRepository");s.hasCommentThread(n.threadId)&&s.getCommentThread(n.threadId).remove(),s.addCommentThread({channelId:o,...n})}),r.forEach(n=>{const o=this.editor.plugins.get("TrackChangesEditing");o.hasSuggestion(n.id)?o.getSuggestion(n.id).attributes=n.attributes:o.addSuggestionData(n)})}}Symbol("MainQueueId");var ji=g(1594),te=g(9417),Ii=g(177);function Di(t,e){}const _=new Array(256).fill(0).map((t,e)=>("0"+e.toString(16)).slice(-2)),ot="Lock from Angular integration (@ckeditor/ckeditor5-angular)";let Fi=(()=>{class t{constructor(r,n){this.config={},this.data="",this.tagName="div",this.disableTwoWayDataBinding=!1,this.ready=new l.bkB,this.change=new l.bkB,this.blur=new l.bkB,this.focus=new l.bkB,this.error=new l.bkB,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function Ni(){const t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+_[255&t]+_[t>>8&255]+_[t>>16&255]+_[t>>24&255]+_[255&e]+_[e>>8&255]+_[e>>16&255]+_[e>>24&255]+_[255&r]+_[r>>8&255]+_[r>>16&255]+_[r>>24&255]+_[255&n]+_[n>>8&255]+_[n>>16&255]+_[n>>24&255]}(),this.ngZone=n,this.elementRef=r;const{CKEDITOR_VERSION:o}=window;if(o){const[s]=o.split(".").map(Number);s<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}set disabled(r){this.setDisabledState(r)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let r=this.editorWatchdog;return this.watchdog&&(r=this.watchdog._watchdogs.get(this.id)),r?r.editor:null}getId(){return this.id}ngOnChanges(r){Object.prototype.hasOwnProperty.call(r,"data")&&r.data&&!r.data.isFirstChange()&&this.writeValue(r.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){var r=this;return(0,U.A)(function*(){r.watchdog?yield r.watchdog.remove(r.id):r.editorWatchdog&&r.editorWatchdog.editor&&(yield r.editorWatchdog.destroy(),r.editorWatchdog=void 0)})()}writeValue(r){null===r&&(r=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(r),this.isEditorSettingData=!1):(this.data=r,this.ready.pipe((0,ji.$)()).subscribe(n=>{n.data.set(this.data)}))}registerOnChange(r){this.cvaOnChange=r}registerOnTouched(r){this.cvaOnTouched=r}setDisabledState(r){this.editorInstance&&(r?this.editorInstance.enableReadOnlyMode(ot):this.editorInstance.disableReadOnlyMode(ot)),this.initiallyDisabled=r}attachToWatchdog(){var r=this;const n=(h,c)=>this.ngZone.runOutsideAngular((0,U.A)(function*(){r.elementRef.nativeElement.appendChild(h);const f=yield r.editor.create(h,c);return r.initiallyDisabled&&f.enableReadOnlyMode(ot),r.ngZone.run(()=>{r.ready.emit(f)}),r.setUpEditorEvents(f),f})),o=function(){var h=(0,U.A)(function*(c){yield c.destroy(),r.elementRef.nativeElement.removeChild(r.editorElement)});return function(f){return h.apply(this,arguments)}}(),s=h=>{(function Mi(t){return t.observed||t.observers.length>0})(this.error)&&this.ngZone.run(()=>this.error.emit(h))},i=document.createElement(this.tagName),a=this.getConfig();if(this.editorElement=i,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:n,destructor:o,sourceElementOrData:i,config:a}).catch(h=>{s(h)}),this.watchdog.on("itemError",(h,{itemId:c})=>{c===this.id&&s()});else{const h=new Yt(this.editor,this.editorWatchdogConfig);h.setCreator(n),h.setDestructor(o),h.on("error",s),this.editorWatchdog=h,this.ngZone.runOutsideAngular(()=>{h.create(i,a).catch(c=>{s(c)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const r={...this.config},n=this.config.initialData||this.data;return n&&(r.initialData=n),r}setUpEditorEvents(r){const o=r.editing.view.document;r.model.document.on("change:data",s=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){const i=r.data.get();this.cvaOnChange(i)}this.change.emit({event:s,editor:r})}})}),o.on("focus",s=>{this.ngZone.run(()=>{this.focus.emit({event:s,editor:r})})}),o.on("blur",s=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:s,editor:r})})})}}return t.\u0275fac=function(r){return new(r||t)(l.rXU(l.aKT),l.rXU(l.SKi))},t.\u0275cmp=l.VBU({type:t,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[l.Jv_([{provide:te.kq,useExisting:(0,l.Rfq)(()=>t),multi:!0}]),l.OA$],decls:1,vars:0,template:function(r,n){1&r&&l.DNE(0,Di,0,0,"ng-template")},encapsulation:2}),t})(),Bi=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=l.$C({type:t}),t.\u0275inj=l.G2t({imports:[[te.YN,Ii.MD]]}),t})()}}]);